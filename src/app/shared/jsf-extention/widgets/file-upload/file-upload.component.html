<div class="mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-has-label mat-form-field mat-form-field-should-float">
  <div class="mat-form-field-wrapper">
    <div class="mat-form-field-flex">
      <div class="mat-form-field-infix">
      <span class="mat-form-field-label-wrapper">
        <label class="mat-form-field-label">{{options['title']}}</label>
      </span>
        <input type="text"
               hidden
               [placeholder]="options['title']"
               [required]="options['required']"
               [disabled]="options['readonly']"
               [(ngModel)]="controlValue">

        <div class="row flex-nowrap align-items-center" *ngIf="!controlValue">
          <div class="col" style="min-width: 0;">
            <input type="file" class="file-input" (input)="updateFile($event)">
          </div>
          <div class="col-auto">
            <button mat-raised-button
                    class="btn btn-sm btn-primary upload-file"
                    type="button"
                    (click)="uploadFile(file)"
                    [disabled]="uploading || !file"
                    [class.loading]="uploading">
              <mat-icon>cloud_upload</mat-icon>
            </button>
          </div>

        </div>

        <div class="row flex-nowrap align-items-center" *ngIf="controlValue">
          <div class="col" style="min-width: 0;">
            <div class="truncate">{{controlValue}}</div>
          </div>
          <div class="col-auto">
            <button mat-icon-button class="reset-file" type="button" (click)="resetFile()">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>

        <div class="mat-error" *ngIf="uploadingError && !controlValue && !uploading">
          {{'global.messages.error.upload-fail' | translate}}
        </div>
      </div>
    </div>
  </div>
</div>
