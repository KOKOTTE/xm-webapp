<ng-container *ngIf="xmEntity">
  <div class="card" *ngIf="jsfAttributes?.schema">
    <div *ngIf="jsfAttributes?.entity?.formHeaderTitle &&
              jsfAttributes?.entity?.formHeaderIconName; then
              hasHeaderConfig else
              hasNotHeaderConfig;">
    </div>

    <div class="card-body min-height entity-card-content">

      <div class="info-block">
          <div class="avatar">
            <div class="avatar-container-card">
              <img src="{{xmEntity.avatarUrl ? xmEntity.avatarUrl : './assets/img/placeholder.png'}}">
              <i class="material-icons" *ngIf="xmEntitySpec.icon && !xmEntity.avatarUrl">{{xmEntitySpec.icon}}</i>
            </div>
          </div>
        <div class="state">
          <div class="state-container">
            <p>Current state:</p>
            <xm-entity-state [stateSpec]="getCurrentStateSpec()"></xm-entity-state>
          </div>
        </div>
        <div class="rating">
          <xm-rating-list-section [xmEntityId]="xmEntity.id" [ratingSpecs]="xmEntitySpec?.ratings">
          </xm-rating-list-section>
        </div>
        <div class="tags">
          <div class="tags-container" *ngIf="xmEntitySpec?.tags">
            <p>Tags:</p>
            <xm-tag-list-section [xmEntityId]="xmEntity.id" [tagSpecs]="xmEntitySpec?.tags"></xm-tag-list-section>
          </div>
        </div>
      </div>

      <xm-loader [showLoader]="showLoader"></xm-loader>
      <div class="fields">
        <json-schema-form [framework]="'material-design'"
                          [schema]="jsfAttributes.schema"
                          [layout]="jsfAttributes.layout | i18nJsf :principal"
                          [form]="jsfAttributes.form | i18nJsf :principal"
                          [data]="jsfAttributes.data"
                          [options]="jsfAttributes.options | i18nJsf :principal"
                          [widgets]="jsfAttributes.widgets"
                          (formLayout)="jsfAttributes.formLayout"
                          (onSubmit)="onSubmitForm($event)"
                          *ngIf="jsfAttributes?.schema">
        </json-schema-form>
      </div>
    </div>
  </div>

  <ng-template #hasHeaderConfig>
    <div class="card-header card-header-icon card-header-primary">
      <div class="card-icon">
        <i class="material-icons">{{jsfAttributes.entity.formHeaderIconName}}</i>
      </div>
      <h4 class="card-title">{{jsfAttributes.entity.formHeaderTitle | i18nName: principal}}</h4>
    </div>
  </ng-template>
  <ng-template #hasNotHeaderConfig>
    <div class="card-header card-header-icon card-header-primary">
      <div class="card-icon">
        <i class="material-icons">info_outline</i>
      </div>
      <h4 class="card-title" jhiTranslate="xm-entity.entity-data-card.title">Data</h4>
    </div>
  </ng-template>
</ng-container>
