<div class="row">
  <div class="col-md-8 offset-md-2">
    <div class="card">
      <div class="card-header card-header-icon card-header-primary">
        <div class="card-icon">
          <i class="material-icons">security</i>
        </div>
        <h4 class="card-title" jhiTranslate="password.title"
            translateValues="{username: '{{account.firstName +' '+ account.lastName}}'}"
            *ngIf="account">Password for [<b>{{account.lastName}}</b>]</h4>
      </div>
      <div class="card-body">
        <div class="alert alert-success" *ngIf="success" jhiTranslate="password.messages.success">
          <strong>Password changed!</strong>
        </div>
        <div class="alert alert-danger" *ngIf="error" jhiTranslate="password.messages.error">
          <strong>An error has occurred!</strong> The password could not be changed.
        </div>

        <div class="alert alert-danger" *ngIf="doNotMatch" jhiTranslate="global.messages.error.dontmatch">
          The password and its confirmation do not match!
        </div>

        <form name="form" role="form" (ngSubmit)="changePassword()" #passwordForm="ngForm">

          <div class="form-group label-floating">
            <label class="control-label" for="oldPassword" jhiTranslate="global.form.oldpassword">Old password</label>
            <input class="form-control" id="oldPassword" name="oldPassword" #oldPasswordInput="ngModel"
                   [type]="isShowPassword ? 'text' : 'password'"
                   [(ngModel)]="password.oldPassword" minlength=4 maxlength=50 required>
            <span class="form-control-addon" (click)="isShowPassword = !isShowPassword">
              <span class="xm-tooltip direction-left" *ngIf="!isShowPassword">
                <i class="material-icons">visibility</i>
                <span jhiTranslate="login.form.show-password">Show password</span>
              </span>
              <span class="xm-tooltip direction-left" *ngIf="isShowPassword">
                <i class="material-icons">visibility_off</i>
                <span jhiTranslate="login.form.hide-password">Hide password</span>
              </span>
            </span>
            <div *ngIf="oldPasswordInput.dirty && oldPasswordInput.invalid">
              <small class="form-text text-danger"
                     *ngIf="oldPasswordInput.errors.required"
                     jhiTranslate="global.messages.validate.oldpassword.required">
                Old password is required.
              </small>
              <small class="form-text text-danger"
                     *ngIf="oldPasswordInput.errors.minlength"
                     jhiTranslate="global.messages.validate.oldpassword.minlength">
                Old password is required to be at least 4 characters.
              </small>
              <small class="form-text text-danger"
                     *ngIf="oldPasswordInput.errors.maxlength"
                     jhiTranslate="global.messages.validate.oldpassword.maxlength">
                Old password cannot be longer than 50 characters.
              </small>
            </div>
          </div>
          <div class="form-group label-floating">
            <label class="control-label" for="newPassword" jhiTranslate="global.form.newpassword">New password</label>
            <input class="form-control" id="newPassword" name="password" #passwordInput="ngModel"
                   [type]="isShowNewPassword ? 'text' : 'password'"
                   [(ngModel)]="password.newPassword" minlength=4 maxlength=50 required>
            <span class="form-control-addon" (click)="isShowNewPassword = !isShowNewPassword">
              <span class="xm-tooltip direction-left" *ngIf="!isShowNewPassword">
                <i class="material-icons">visibility</i>
                <span jhiTranslate="login.form.show-password">Show password</span>
              </span>
              <span class="xm-tooltip direction-left" *ngIf="isShowNewPassword">
                <i class="material-icons">visibility_off</i>
                <span jhiTranslate="login.form.hide-password">Hide password</span>
              </span>
            </span>
            <div *ngIf="passwordInput.dirty && passwordInput.invalid">
              <small class="form-text text-danger"
                     *ngIf="passwordInput.errors.required" jhiTranslate="global.messages.validate.newpassword.required">
                Your password is required.
              </small>
              <small class="form-text text-danger"
                     *ngIf="passwordInput.errors.minlength"
                     jhiTranslate="global.messages.validate.newpassword.minlength">
                Your password is required to be at least 4 characters.
              </small>
              <small class="form-text text-danger"
                     *ngIf="passwordInput.errors.maxlength"
                     jhiTranslate="global.messages.validate.newpassword.maxlength">
                Your password cannot be longer than 50 characters.
              </small>
            </div>
            <xm-password-strength-bar [passwordToCheck]="password.newPassword"></xm-password-strength-bar>
          </div>
          <div class="form-group label-floating">
            <label class="control-label" for="confirmPassword" jhiTranslate="global.form.confirmpassword">New password
              confirmation</label>
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                   #confirmPasswordInput="ngModel"
                   [(ngModel)]="password.confirmNewPassword" minlength=4 maxlength=50 required>
            <div *ngIf="confirmPasswordInput.dirty && confirmPasswordInput.invalid">
              <small class="form-text text-danger"
                     *ngIf="confirmPasswordInput.errors.required"
                     jhiTranslate="global.messages.validate.confirmpassword.required">
                Your confirmation password is required.
              </small>
              <small class="form-text text-danger"
                     *ngIf="confirmPasswordInput.errors.minlength"
                     jhiTranslate="global.messages.validate.confirmpassword.minlength">
                Your confirmation password is required to be at least 4 characters.
              </small>
              <small class="form-text text-danger"
                     *ngIf="confirmPasswordInput.errors.maxlength"
                     jhiTranslate="global.messages.validate.confirmpassword.maxlength">
                Your confirmation password cannot be longer than 50 characters.
              </small>
            </div>
          </div>

          <div class="text-right">
            <button type="submit" [disabled]="passwordForm.form.invalid" class="btn btn-primary"
                    jhiTranslate="password.form.button">Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
